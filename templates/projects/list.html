{%extends 'admin/base.html'%}
{%block title%}All Projects{%endblock%}

{%block extrahead%}
<script type="text/javascript" language="javascript" charset="utf-8">
        function subscribe(project_id) {
                $.get("/user/subscribe/"+project_id, function(data) {
                        if( data != "False") {
                var str = ""+
                "<a id=\"sublink"+project_id+"\" href=\"#\" onclick=\"unsubscribe("+project_id+");\">"+
                                "<img id=\"subimg"+project_id+"\" class=\"subscription_on_img\" src=\"/site_media/images/star.png\" alt=\"Unsubscribe\" border=\"0\"/></a> ";
                $("#subscribe"+project_id+"_span").html(str);
                $('#messageDiv').html("<b>You subscribed to"+project_id+"</b>");
                                $('#messageDiv').fadeOut("slow");
                        }
                        else {
                                $('#messageDiv').html("<b>Error occured during subscription</b>");
                                $('#messageDiv').fadeOut("slow");
                        }
                }
                );
        }

        function unsubscribe(project_id) {
                $.get("/user/unsubscribe/"+project_id, function(data) {
                        if( data != "False") {
                var str = ""+
                "<a id=\"sublink"+project_id+"\" href=\"#\" onclick=\"subscribe("+project_id+");\">"+
                                "<img id=\"subimg"+project_id+"\" class=\"subscription_off_img\" src=\"/site_media/images/star-empty.png\" alt=\"Subscribe\" border=\"0\"/></a> ";
                $("#subscribe"+project_id+"_span").html(str);
                        $('#messageDiv').html("<b>You unsubscribed from"+project_id+"</b>");
                                $('#messageDiv').fadeOut("slow");
                        }
                        else {
                                $('#messageDiv').html("<b>Error occured during subscription</b>");
                                $('#messageDiv').fadeOut("slow");
                        }
                }
                );
        }
</script>
{%endblock%}

